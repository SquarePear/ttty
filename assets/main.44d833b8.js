!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver((t=>{for(const e of t)if("childList"===e.type)for(const t of e.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&n(t)})).observe(document,{childList:!0,subtree:!0})}function n(t){if(t.ep)return;t.ep=!0;const n=function(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?n.credentials="include":"anonymous"===t.crossorigin?n.credentials="omit":n.credentials="same-origin",n}(t);fetch(t.href,n)}}();const t=(t,n,e)=>{const s=document.createElement(t);return n&&(s.className=n),e&&(s.innerHTML=e),s},n=(t,n=!1)=>{t.input.readOnly=!n,t.inputContainer.style.opacity=n?"":"0"};var e,s;(s=e||(e={})).ON_COMMAND="onCommand",s.ON_COMMAND_NOT_FOUND="onCommand404",s.ON_PROCESS_START="onProcessStart",s.ON_PROCESS_END="onProcessStop",s.ON_PROCESS_INTERRUPT="onProcessInterrupt",s.ON_INIT="onInit";const o=(t,n,e)=>{const s=new CustomEvent(t,{detail:e});n.dispatchEvent(s)},i=(t,n)=>{const{print:s}=n,i=t.split(" "),r=i[0],c=i.slice(1),a=n.settings.commands[r];a?a.argDescriptions&&a.argDescriptions.length>0&&0===c.length?s(`Usage: ${r} ${a.argDescriptions.map((t=>`[${t}]`)).join(" ")}`):(a.func(n,...c),o(e.ON_COMMAND,n.settings.host,t)):(s(`<span class="terminal-error">command not found: ${r}</span>`),o(e.ON_COMMAND_NOT_FOUND,n.settings.host,t))},r=t=>{const{settings:{host:s}}=t;n(t),t.isProcessRunning=!0,o(e.ON_PROCESS_START,s)},c=t=>{const{input:s,settings:{host:i}}=t;n(t,!0),t.isProcessRunning=!1,s.focus(),o(e.ON_PROCESS_END,i)},a=(t,n)=>{const{history:e,lastHistoryIndex:s}=t,o=e.length-1;let i;n&&0===s||(i=n?s-1:s===o?0:s+1,t.input.value=e[n?i:s],t.lastHistoryIndex=i)};const p=(({host:n,welcomeMessage:s="ttty v.1.0.0",prompt:p="$: ",historyLength:l=50,commands:u})=>{const d={host:n,welcomeMessage:s,prompt:p,historyLength:l,commands:u},{commandContainer:m,input:g,inputContainer:h}=((n,e)=>{n.className="terminal";const s=t("div","terminal-container"),o=t("div","terminal-type"),i=t("span",void 0,e),r=t("input");return r.setAttribute("type","text"),o.append(i),o.append(r),n.append(s),n.append(o),n.addEventListener("click",(()=>r.focus())),{commandContainer:s,input:r,inputContainer:o}})(n,p),y={history:[],lastHistoryIndex:0,isProcessRunning:!1,settings:d,commandContainer:m,inputContainer:h,input:g,print:(n,e=!1)=>((n,e,s,o,i)=>{const r=t("p",void 0,e?i:n);if(e){const e=t("span","termainal-command",n);r.append(e)}s.append(r),o.scrollIntoView()})(n,e,m,g,p),run:t=>i(t,y),start:()=>r(y),stop:()=>c(y),type:(n,e=20)=>((n,e,s)=>{r(s);const o=t("p");s.commandContainer.append(o);let i=0;const a=()=>{i<n.length&&s.isProcessRunning?(o.innerHTML+=n.charAt(i),i++,setTimeout(a,e)):c(s)};setTimeout(a,e)})(n,e,y)};return((t,n)=>{const{input:s,print:r}=n;t.addEventListener("keyup",(({key:p,ctrlKey:l})=>{if(l&&"c"===p&&n.isProcessRunning)r("^C"),c(n),o(e.ON_PROCESS_INTERRUPT,t);else{if("Enter"===p)return n.lastHistoryIndex=0,s.value.length>0?(r(s.value,!0),(t=>{const{input:{value:n},history:e,settings:{historyLength:s}}=t;n!==e[0]&&(e.length>=s?t.history=[n,...e.slice(0,-1)]:(t.history=[n,...e],t.lastHistoryIndex=0))})(n),i(s.value,n)):r(" ",!0),void(s.value="");if("ArrowUp"===p)return void a(n);"ArrowDown"===p&&a(n,!0)}}))})(n,y),o(e.ON_INIT,n),y})({host:document.querySelector("#terminal"),prompt:"ttty:~$ ",commands:{test:{name:"test",description:"test string",func:({print:t})=>{t("YEEHAW"),t("HAWYEE")}},echo:{name:"echo",description:"echo a thing",argDescriptions:["thing to echo"],func:({print:t},n)=>{t("Thing you wanted:"),t(n)}},eval:{name:"eval",description:"eval test",func:({print:t,run:n})=>{t("Evaluating test:"),n("test")}}}});p.input.focus(),window.terminal=p;
